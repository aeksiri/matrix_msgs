byte current_state
bool[] output_state